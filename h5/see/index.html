<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title></title>
    <script type="text/javascript">
    	
   		document.addEventListener('plusready', function(){
   			//console.log("所有plus api都应该在此事件发生后调用，否则会出现plus is undefined。"
   			
   		});
   		
    </script>
</head>
<body>
	<p><button onclick="geoFindMe()">Show my location</button></p>
	<div id="out"></div>
</body>
<script>
		function geoFindMe() {
			  var output = document.getElementById("out");
			
			  if (!navigator.geolocation){
			    output.innerHTML = "<p>Geolocation is not supported by your browser</p>";
			    return;
			  }
			
			  function success(position) {
			    var latitude  = position.coords.latitude;
			    var longitude = position.coords.longitude;
			
			    output.innerHTML = '<p>Latitude is ' + latitude + '° <br>Longitude is ' + longitude + '°</p>';
			
			    var img = new Image();
			    img.src = "https://maps.googleapis.com/maps/api/staticmap?center=" + latitude + "," + longitude + "&zoom=13&size=300x300&sensor=false";
			
				alert(img);
			    output.appendChild(img);
			  }
			
			  function error() {
			    output.innerHTML = "Unable to retrieve your location";
			    
			    alert('获取失败')
			  }
			
			  output.innerHTML = "<p>Locating…</p>";
			
			  navigator.geolocation.getCurrentPosition(success, error);
		}
	</script>
</html>